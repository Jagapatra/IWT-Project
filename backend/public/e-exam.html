<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>e-Exam - Edope Learner</title>
    <link rel="stylesheet" href="pages.css" />
    <style>
      /* Modal styles */
      #examModal {
        display: none;
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: rgba(0, 0, 0, 0.5);
        justify-content: center;
        align-items: center;
      }
      #examModal:target {
        display: flex;
      }
      .modal-content {
        background-color: white;
        padding: 20px;
        border-radius: 5px;
        width: 300px;
        text-align: center;
      }
      .modal-content h3 {
        margin: 0 0 10px;
      }
      .modal-content p {
        margin-bottom: 20px;
      }
      .modal-content a {
        text-decoration: none;
        color: white;
        background-color: #007bff;
        padding: 10px 15px;
        border-radius: 5px;
      }
      .close-btn {
        text-decoration: none;
        color: #333;
        font-size: 20px;
        position: absolute;
        top: 10px;
        right: 10px;
      }
      /* Footer */
      footer {
        background-color: #333;
        color: #bbb;
        text-align: center;
        padding: 15px;
        font-size: 0.9rem;
        box-shadow: 0 -2px 10px rgba(0, 0, 0, 0.1);
      }
      footer a {
        color: #4a90e2;
        text-decoration: none;
        margin: 0 8px;
        font-weight: 500;
      }
      footer a:hover {
        text-decoration: underline;
      }
    </style>
  </head>
  <body>
    <header>
      <h1>e-Exam</h1>
    </header>
    <nav>
      <ul>
        <li><a href="./index.html">üè† Home</a></li>
        <li><a href="./e-exam.html">üìë e-Exam</a></li>
        <li><a href="./openforum.html">üí¨ OpenForum</a></li>
        <li><a href="./e-repository.html">üìö e-Repository</a></li>
        <li><a href="./myWall.html">üñºÔ∏è MyWall</a></li>
      </ul>
      <div id="search-bar">
          <input type="text" placeholder="Search..." />
          <button>Search</button>
      </div>
      <!-- Updated login/user dashboard section -->
      <div id="login-dashboard">
          <button onclick="window.location.href='./login.html'">Login</button>
          <button onclick="window.location.href='./registration.html'">Register</button>
      </div>
      <div id="user-dashboard" style="display: none;">
          <span style="color: white; margin-right: 10px;">Welcome, <span id="user-name"></span>!</span>
          <button id="logout-button" style="background-color: #357abd;">Logout</button>
      </div>
  </nav>
    <div class="container">
      <h2>Welcome to the e-Exam Portal</h2>
      <p>
        Discover online exams, track your progress, and elevate your learning
        experience.
      </p>

      <!-- Exam Cards with links to open the modal -->
      <div class="card">
        <a href="#examModal" id="examLink1">
          <h3>Exam 1: Introduction to HTML</h3>
          <p>Test your knowledge of basic HTML structures and tags.</p>
        </a>
      </div>
      <div class="card">
        <a href="#examModal" id="examLink2">
          <h3>Exam 2: CSS Fundamentals</h3>
          <p>Assess your understanding of CSS styling and layouts.</p>
        </a>
      </div>
      <div class="card">
        <a href="#examModal" id="examLink3">
          <h3>Exam 3: JavaScript Basics</h3>
          <p>Evaluate your grasp of JavaScript syntax and logic.</p>
        </a>
      </div>
    </div>

    <!-- Modal -->
    <div id="examModal">
      <div class="modal-content">
        <a href="#" class="close-btn">&times;</a>
        <h3>Start Exam</h3>
        <p>Are you ready to start this exam?</p>
        <a href="./instr.html">Yes, Start Exam</a>
      </div>
    </div>

    <footer 
style="
  position:relative; 
  bottom: 0; 
  left: 0; 
  width: 100%; 
  background-color: black; 
  color: white; 
  text-align: center; 
  padding: 1rem; 
  font-family: 'Roboto', sans-serif; 
  box-shadow: 0 -2px 5px rgba(0, 0, 0, 0.1);
"
>
<p style="margin: 0; font-size: 1rem;">Copyright ¬© 2024 EduConnect</p>
<div style="margin-top: 0.5rem;">
  <a href="#" style="color: #5a92e3; text-decoration: none; margin: 0 0.5rem;">About Us</a> |
  <a href="#" style="color: #5a92e3; text-decoration: none; margin: 0 0.5rem;">Contact</a> |
  <a href="#" style="color: #5a92e3; text-decoration: none; margin: 0 0.5rem;">Privacy Policy</a>
</div>
</footer>
  </body>
  <script>
    // Add this script to handle authentication state
    document.addEventListener('DOMContentLoaded', function() {
        checkAuthStatus();
  
        function checkAuthStatus() {
            fetch('http://localhost:8000/auth/status', {
                credentials: 'include'
            })
            .then(response => response.json())
            .then(data => {
                const loginDashboard = document.getElementById('login-dashboard');
                const userDashboard = document.getElementById('user-dashboard');
                
                if (data.isAuthenticated) {
                    // User is logged in
                    loginDashboard.style.display = 'none';
                    userDashboard.style.display = 'flex';
                    document.getElementById('user-name').textContent = data.user.name;
                } else {
                    // User is not logged in
                    loginDashboard.style.display = 'flex';
                    userDashboard.style.display = 'none';
                }
            })
            .catch(error => {
                console.error('Error checking auth status:', error);
            });
        }
  
        // Handle logout
        document.getElementById('logout-button')?.addEventListener('click', function() {
            fetch('http://localhost:8000/logout', {
                method: 'POST',
                credentials: 'include'
            })
            .then(response => response.json())
            .then(data => {
                if (data.message === "Logged out successfully") {
                    window.location.reload();
                }
            })
            .catch(error => {
                console.error('Error logging out:', error);
            });
        });
    });
    </script>
</html>
